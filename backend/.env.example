# DesktopAI Backend — Environment Variables
# Copy to .env and adjust values for your setup.

# ── Core ──────────────────────────────────────────────
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_DB_PATH=backend/data/desktopai.db
API_TOKEN=                          # Leave empty to disable auth

# ── CORS ──────────────────────────────────────────────
# Comma-separated origins, e.g. http://localhost:3000
ALLOWED_ORIGINS=

# ── Event Storage ─────────────────────────────────────
EVENT_LOG_MAX=1000
EVENT_LIMIT_DEFAULT=200
SUMMARY_EVENT_COUNT=20
DB_RETENTION_DAYS=14
DB_MAX_EVENTS=20000

# ── Ollama (LLM) ─────────────────────────────────────
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1:8b
OLLAMA_VISION_MODEL=                # e.g. llava:7b (blank = use default model)
OLLAMA_CLASSIFIER_MODEL=            # blank = use default model
OLLAMA_PLANNER_MODEL=               # blank = use default model
OLLAMA_EXECUTOR_MODEL=              # blank = use default model

# ── Activity Classifier ──────────────────────────────
CLASSIFIER_DEFAULT=docs
CLASSIFIER_USE_OLLAMA=false

# ── Autonomy Planner ─────────────────────────────────
# deterministic | auto | ollama_required
AUTONOMY_PLANNER_MODE=deterministic

# ── Action Executor ───────────────────────────────────
# auto | simulated | windows-powershell | bridge | playwright
ACTION_EXECUTOR_MODE=auto
ACTION_EXECUTOR_TIMEOUT_S=20
ACTION_EXECUTOR_POWERSHELL=powershell.exe
ACTION_EXECUTOR_DEFAULT_COMPOSE_TEXT=Draft generated by DesktopAI.
ACTION_EXECUTOR_RETRY_COUNT=2
ACTION_EXECUTOR_RETRY_DELAY_MS=150

# ── Windows Command Bridge ────────────────────────────
BRIDGE_TIMEOUT_S=10

# ── Vision Agent ──────────────────────────────────────
VISION_AGENT_ENABLED=true
VISION_AGENT_MAX_ITERATIONS=15
VISION_AGENT_MIN_CONFIDENCE=0.3
VISION_AGENT_MAX_CONSECUTIVE_ERRORS=3
VISION_AGENT_ERROR_BACKOFF_MS=500

# ── Trajectory Memory ────────────────────────────────
TRAJECTORY_CONTEXT_MAX_CHARS=1500
TRAJECTORY_CONTEXT_MAX_RESULTS=3

# ── Playwright / CDP ─────────────────────────────────
CDP_ENDPOINT=http://localhost:9222

# ── Task Records ──────────────────────────────────────
DB_MAX_TASK_RECORDS=5000
DB_TASK_RETENTION_DAYS=0

# ── Autonomy Run Records ─────────────────────────────
DB_MAX_AUTONOMY_RUNS=2000
DB_AUTONOMY_RETENTION_DAYS=0

# ── UI Telemetry ──────────────────────────────────────
UI_TELEMETRY_ARTIFACT_DIR=artifacts/ui/telemetry
UI_TELEMETRY_MAX_EVENTS=5000

# ── Rate Limiting ─────────────────────────────────────
RATE_LIMIT_PER_MINUTE=60            # 0 = disabled

# ── Runtime Logs ──────────────────────────────────────
RUNTIME_LOG_MAX_ENTRIES=2000
